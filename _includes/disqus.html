{% comment %} Load script if disquss comments are enabled and `page.comments` is either empty (index) or set to true {% endcomment %}
  <ol>
    <li>page.comments = {{ page.comments }}</li>
    <li>page.disqus_identifier = {{ page.disqus_identifier }}</li>
    <li>page.url = {{ page.url }}</li>
    <li>site.disqus_short_name = {{ site.disqus_short_name }}</li>
  </ol>
{% if page.comments %}
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = '{{ site.disqus_short_name }}';
      {% if page.comments == true %}
        {% comment %} `page.comments` can be only be set to true on pages/posts, so we embed the comments here. {% endcomment %}
        // var disqus_developer = 1;
        var disqus_identifier = '{{ page.disqus_identifier}}';
        var disqus_script = 'embed.js';
      {% endif %}
    (function () {
      var embedScript = document.createElement('script');
      embedScript.type = 'text/javascript';
      embedScript.async = true;
      embedScript.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(embedScript);
      var countScript = document.createElement('script');
      countScript.type = 'text/javascript';
      countScript.async = true;
      countScript.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(countScript);
    }());
  </script>
  <noscript><a href=“http://{{ site.disqus_short_name }}.disqus.com/?url=ref”>View the discussion thread.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
{% endif %}